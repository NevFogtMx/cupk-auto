import{_ as I,r as f,m as A,E as m,a as d,n as D,o,c as i,b as t,w as e,q as E,i as h,F as v,f as S,p as T,h as q,g as s,j,t as _}from"./index-40bce0d9.js";const k=r=>(T("data-v-2b9e16e7"),r=r(),q(),r),F=k(()=>h("div",{class:"tip"},[s(" # 自动评教默认打分为95分"),h("br"),s(" # 评教一个个点 ")],-1)),L=k(()=>h("br",null,null,-1)),M={key:0},O={key:1},J=["element-loading-text"],P={__name:"SisAutoRate",setup(r){const g=f("0"),b=f([]),p=f(!0),x=f("Loading...");A(()=>{fetch("http://localhost:8877/jwxt/pj/getlist").then(l=>l.json()).then(l=>{l.code==1?(b.value=l.data,p.value=!1):m({message:"获取评教列表失败",type:"error"})}).catch(l=>{console.log(l)})});function w(l){x.value="Rating...",p.value=!0,fetch("http://localhost:8877/jwxt/pj/rate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:l.url})}).then(n=>n.json()).then(n=>{n.code==1?(p.value=!1,l.finish="是",l.score=95,m({message:"评教成功",type:"success"})):m({message:"评教失败",type:"error"})}).catch(n=>{console.log(n)})}return(l,n)=>{const a=d("el-col"),y=d("el-row"),C=d("el-button"),N=d("el-collapse-item"),V=d("el-collapse"),R=D("loading");return o(),i(v,null,[F,L,t(V,{modelValue:g.value,"onUpdate:modelValue":n[0]||(n[0]=c=>g.value=c)},{default:e(()=>[(o(!0),i(v,null,S(b.value,c=>(o(),j(N,{name:"1"},{title:e(()=>[s(_(c.batch+"     "+c.term),1)]),default:e(()=>[c.sublist.length==0?(o(),i("div",M," No Course ")):(o(),i("div",O,[t(y,null,{default:e(()=>[t(a,{span:4,class:"center"},{default:e(()=>[s("序号")]),_:1}),t(a,{span:4,class:"center"},{default:e(()=>[s("课程")]),_:1}),t(a,{span:4,class:"center"},{default:e(()=>[s("教师")]),_:1}),t(a,{span:4,class:"center"},{default:e(()=>[s("分数")]),_:1}),t(a,{span:4,class:"center"},{default:e(()=>[s("是否已评教")]),_:1}),t(a,{span:4,class:"center"},{default:e(()=>[s("操作")]),_:1})]),_:1}),(o(!0),i(v,null,S(c.sublist,(u,B)=>(o(),j(y,{style:{"margin-top":"15px"}},{default:e(()=>[t(a,{span:4,class:"center"},{default:e(()=>[s(_(B+1),1)]),_:2},1024),t(a,{span:4,class:"center"},{default:e(()=>[s(_(u.course),1)]),_:2},1024),t(a,{span:4,class:"center"},{default:e(()=>[s(_(u.teacher),1)]),_:2},1024),t(a,{span:4,class:"center"},{default:e(()=>[s(_(u.score),1)]),_:2},1024),t(a,{span:4,class:"center"},{default:e(()=>[s(_(u.finish),1)]),_:2},1024),t(a,{span:4,class:"center"},{default:e(()=>[t(C,{text:"",style:{color:"#66b1ff"},onClick:U=>w(u)},{default:e(()=>[s("评教")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),256))]))]),_:2},1024))),256))]),_:1},8,["modelValue"]),E(h("div",{accordion:"",class:"loading","element-loading-text":x.value},null,8,J),[[R,p.value]])],64)}}},z=I(P,[["__scopeId","data-v-2b9e16e7"]]);export{z as default};
